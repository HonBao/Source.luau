-- Tạo GUI
local ScreenGui = Instance.new("ScreenGui")
local HonButton = Instance.new("TextButton")
local UICorner = Instance.new("UICorner")

ScreenGui.Name = "HonFarmGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = game.CoreGui

HonButton.Name = "HonButton"
HonButton.Parent = ScreenGui
HonButton.BackgroundColor3 = Color3.fromRGB(15, 15, 15) -- nền đen đậm
HonButton.BorderSizePixel = 0
HonButton.Position = UDim2.new(0, 10, 0, 200) -- góc trái
HonButton.Size = UDim2.new(0, 50, 0, 50) -- nhỏ gọn
HonButton.Font = Enum.Font.SourceSansBold
HonButton.Text = "HON"
HonButton.TextColor3 = Color3.fromRGB(255, 0, 0)
HonButton.TextScaled = true
HonButton.AutoButtonColor = false

UICorner.CornerRadius = UDim.new(1, 0)
UICorner.Parent = HonButton

-- Biến bật/tắt auto farm
local autoFarm = false

-- Auto Farm đánh thường
task.spawn(function()
    while true do
        task.wait(0.3)
        if autoFarm then
            local player = game.Players.LocalPlayer
            local character = player.Character
            if not character then continue end
            local root = character:FindFirstChild("HumanoidRootPart")
            if not root then continue end

            -- Tìm quái gần nhất
            local nearestEnemy = nil
            local minDistance = math.huge
            for _, v in pairs(workspace.Enemies:GetChildren()) do
                if v:FindFirstChild("HumanoidRootPart") and v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                    local dist = (root.Position - v.HumanoidRootPart.Position).Magnitude
                    if dist < minDistance then
                        minDistance = dist
                        nearestEnemy = v
                    end
                end
            end

            -- Di chuyển và đánh
            if nearestEnemy then
                root.CFrame = nearestEnemy.HumanoidRootPart.CFrame * CFrame.new(0, 0, 2)

                -- Đánh thường (click chuột)
                game:GetService("VirtualUser"):Button1Down(Vector2.new(0, 0))
            end
        end
    end
end)

-- Bấm nút bật/tắt
HonButton.MouseButton1Click:Connect(function()
    autoFarm = not autoFarm
    if autoFarm then
        HonButton.Text = "ON"
        HonButton.TextColor3 = Color3.fromRGB(0, 255, 0)
    else
        HonButton.Text = "HON"
        HonButton.TextColor3 = Color3.fromRGB(255, 0, 0)
    end
end)
